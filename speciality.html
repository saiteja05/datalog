<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comprehensive Report: Atlas Search vs. The Competition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- 
    Application Structure Plan: 
    This is a merged document combining comparisons for Elasticsearch, Pinecone, and Qdrant against Atlas Search.
    A top-level tab system allows switching between three full reports: 
    1. Atlas Search vs. Elasticsearch/OpenSearch
    2. Atlas Search vs. Pinecone
    3. Atlas Search vs. Qdrant
    Each report is self-contained and follows a consistent multi-section layout: 
    At a Glance, Deep Dive (with inner tabs), Scaling Challenges, Pricing, and Use Cases.
    This provides a familiar navigation model while presenting distinct comparative content.
    -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #030712;
            color: #d1d5db;
        }
        .main-tab-button.active {
            border-color: #4f46e5;
            color: #c7d2fe;
            background-color: #1f2937;
        }
        .deep-dive-tab-button.active {
            border-color: #00ED64;
            color: #00ED64;
            font-weight: 600;
        }
        .main-tab-content, .deep-dive-tab-content {
            display: none;
        }
        .main-tab-content.active, .deep-dive-tab-content.active {
            display: block;
        }
        .arch-component {
            transition: all 0.2s ease-in-out;
        }
        .arch-component:hover {
            transform: translateY(-4px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .feature-card {
            transition: all 0.2s ease-in-out;
            cursor: pointer;
        }
        .feature-card:hover {
             transform: scale(1.03);
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        @media (max-width: 768px) {
            .chart-container {
                height: 300px;
            }
        }
        .section-heading {
            border-bottom: 1px solid #374151;
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
            font-weight: 600;
            color: #e5e7eb;
        }
        .db-color-mongo { color: #22c55e; border-color: #22c55e; }
        .db-color-elastic { color: #3b82f6; border-color: #3b82f6; }
        .db-color-pinecone { color: #f97316; border-color: #f97316; }
        .db-color-qdrant { color: #ef4444; border-color: #ef4444; }
        code {
            background-color: rgba(71, 85, 105, 0.5);
            padding: 0.1em 0.3em;
            border-radius: 4px;
            font-family: monospace;
            font-size: 0.9em;
        }
    </style>
</head>
<body class="bg-slate-900 text-slate-300">

    <div class="container mx-auto px-4 py-8 md:py-12">
        
        <header class="text-center mb-12 md:mb-16">
            <h1 class="text-4xl md:text-5xl font-bold text-white mb-4">Modern Search Architecture Showdown</h1>
            <p class="text-lg md:text-xl text-slate-300 max-w-3xl mx-auto">A Comparative Analysis of Atlas Search, Elasticsearch, Pinecone, and Qdrant</p>
        </header>

        <main>
            <!-- MAIN TABS -->
            <div id="main-tabs-container" class="mb-8 border-b border-slate-700 flex justify-center flex-wrap space-x-2 md:space-x-4">
                <button class="main-tab-button text-sm md:text-base font-semibold px-4 py-3 border-b-2 border-transparent text-slate-400 hover:text-indigo-300 transition-colors rounded-t-lg" data-main-tab="elastic">vs. Elasticsearch</button>
                <button class="main-tab-button text-sm md:text-base font-semibold px-4 py-3 border-b-2 border-transparent text-slate-400 hover:text-indigo-300 transition-colors rounded-t-lg" data-main-tab="pinecone">vs. Pinecone</button>
                <button class="main-tab-button text-sm md:text-base font-semibold px-4 py-3 border-b-2 border-transparent text-slate-400 hover:text-indigo-300 transition-colors rounded-t-lg" data-main-tab="qdrant">vs. Qdrant</button>
            </div>

            <!-- MAIN TAB CONTENT CONTAINER -->
            <div id="main-tab-content-container">

                <!-- ELASTICSEARCH COMPARISON CONTENT -->
                <div id="main-tab-elastic" class="main-tab-content">
                    <section class="mb-12 md:mb-20">
                        <h2 class="text-3xl font-bold text-center mb-8 text-white">At a Glance: Integrated vs. Bolt-On</h2>
                        <div class="grid md:grid-cols-2 gap-8 max-w-6xl mx-auto">
                            <div class="bg-slate-800 p-6 rounded-xl border border-slate-700 shadow-lg">
                                <h3 class="text-2xl font-bold text-[#00ED64] mb-4">MongoDB Atlas Search</h3>
                                <p class="text-slate-400">The <span class="font-semibold text-[#00ED64]">Integrated Data Platform</span>. Embeds Lucene-based search directly within MongoDB to reduce complexity, eliminate data sync pipelines, and lower TCO.</p>
                            </div>
                            <div class="bg-slate-800 p-6 rounded-xl border border-slate-700 shadow-lg">
                                <h3 class="text-2xl font-bold db-color-elastic mb-4">Elasticsearch / OpenSearch</h3>
                                <p class="text-slate-400">The <span class="font-semibold db-color-elastic">Dedicated Search Engine</span>. A specialized, standalone system optimized for search-centric workloads like log analytics and observability.</p>
                            </div>
                        </div>
                    </section>

                    <section class="bg-slate-800/50 p-6 md:p-8 rounded-2xl border border-slate-700 shadow-lg mb-12 md:mb-20">
                         <h2 class="text-3xl font-bold text-center mb-2 text-white">Comparative Deep Dive</h2>
                         <p class="text-center text-slate-400 mb-8">Select a category to explore a detailed comparison.</p>
                        <div class="deep-dive-tabs mb-6 border-b border-slate-700 flex justify-center space-x-4 md:space-x-8" data-parent-tab="elastic">
                            <button class="deep-dive-tab-button text-sm md:text-base px-4 py-3 border-b-2 border-transparent text-slate-400 hover:text-green-400" data-deep-dive-tab="architecture">Architecture</button>
                            <button class="deep-dive-tab-button text-sm md:text-base px-4 py-3 border-b-2 border-transparent text-slate-400 hover:text-green-400" data-deep-dive-tab="search-types">Search Types</button>
                            <button class="deep-dive-tab-button text-sm md:text-base px-4 py-3 border-b-2 border-transparent text-slate-400 hover:text-green-400" data-deep-dive-tab="scaling">Scaling</button>
                            <button class="deep-dive-tab-button text-sm md:text-base px-4 py-3 border-b-2 border-transparent text-slate-400 hover:text-green-400" data-deep-dive-tab="features">Features</button>
                        </div>

                        <div class="mt-8 min-h-[400px]">
                            <div id="deep-dive-tab-architecture-elastic" class="deep-dive-tab-content">
                                <p class="text-center text-slate-400 mb-8 max-w-3xl mx-auto">Atlas Search integrates search into the database to eliminate data sync complexity, while Elasticsearch operates as a separate, specialized system requiring a sync pipeline.</p>
                                <div class="grid md:grid-cols-2 gap-8 items-start">
                                     <div>
                                        <h3 class="text-xl font-bold text-[#00ED64] mb-4 text-center">Atlas Search Architecture</h3>
                                        <div class="arch-component bg-slate-900 p-6 rounded-lg min-h-[300px] flex flex-col items-center justify-center space-y-4 border border-slate-700">
                                            <p class="text-indigo-300">Application</p>
                                            <div class="text-2xl text-slate-400">&darr;</div>
                                            <div class="p-4 bg-slate-800 rounded-lg shadow-lg border border-green-500/30 w-full text-center">
                                                <h4 class="font-bold text-white">Atlas Unified API</h4>
                                                <p class="text-sm text-slate-400">(Single Endpoint)</p>
                                            </div>
                                            <div class="flex justify-around gap-2 w-full">
                                                <div class="w-1/2 p-3 bg-gray-800 rounded-lg border border-gray-600">DB Process (`mongod`)</div>
                                                <div class="w-1/2 p-3 bg-gray-800 rounded-lg border border-gray-600">Search Process (`mongot`)</div>
                                            </div>
                                            <p class="text-xs text-slate-500 mt-2">Automatic sync via Change Streams. No external pipeline needed.</p>
                                        </div>
                                     </div>
                                      <div>
                                        <h3 class="text-xl font-bold db-color-elastic mb-4 text-center">Elasticsearch Architecture</h3>
                                        <div class="arch-component bg-slate-900 p-6 rounded-lg min-h-[300px] flex flex-col items-center justify-center space-y-4 border border-slate-700">
                                            <p class="text-indigo-300">Application</p>
                                            <div class="text-2xl text-slate-400">&darr;</div>
                                             <div class="flex justify-around gap-2 w-full">
                                                <div class="w-1/2 p-3 bg-gray-800 rounded-lg border border-gray-600">Primary DB<br/><span class="text-xs text-slate-400">(e.g., MongoDB)</span></div>
                                                <div class="w-1/2 p-3 bg-gray-800 rounded-lg border border-gray-600">Elasticsearch<br/><span class="text-xs text-slate-400">(Search Index)</span></div>
                                            </div>
                                            <div class="text-red-400 font-semibold text-sm flex items-center">
                                                <span class="mr-2">⇅</span> Separate Sync Pipeline
                                            </div>
                                             <p class="text-xs text-slate-500 mt-2">Requires separate infrastructure and management for data synchronization.</p>
                                        </div>
                                     </div>
                                </div>
                            </div>
                            <div id="deep-dive-tab-search-types-elastic" class="deep-dive-tab-content">
                                <p class="text-center text-slate-400 mb-8 max-w-3xl mx-auto">Both platforms share a Lucene foundation, giving them similar, mature capabilities in full-text search. The primary difference lies in the developer experience and integration.</p>
                                <div class="grid md:grid-cols-2 gap-4">
                                    <div class="bg-slate-900 p-4 rounded-lg border border-slate-700">
                                        <h5 class="font-bold text-lg text-[#00ED64]">Atlas Search</h5>
                                        <ul class="list-disc list-inside space-y-2 mt-2 text-slate-400">
                                            <li>**Querying:** Uses the `$search` stage within the MongoDB Aggregation Framework.</li>
                                            <li>**Hybrid Search:** Native server-side fusion via the `$rankFusion` stage.</li>
                                            <li>**Experience:** Unified API. Developers use familiar MQL and drivers.</li>
                                        </ul>
                                    </div>
                                    <div class="bg-slate-900 p-4 rounded-lg border border-slate-700">
                                        <h5 class="font-bold text-lg db-color-elastic">Elasticsearch / OpenSearch</h5>
                                        <ul class="list-disc list-inside space-y-2 mt-2 text-slate-400">
                                            <li>**Querying:** Uses its own powerful, JSON-based Query DSL.</li>
                                            <li>**Hybrid Search:** Server-side fusion via a top-level `rank` clause.</li>
                                            <li>**Experience:** Requires separate client libraries and API endpoints from the primary DB.</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div id="deep-dive-tab-scaling-elastic" class="deep-dive-tab-content">
                                <p class="text-center text-slate-400 mb-8 max-w-3xl mx-auto">Scaling both systems presents different challenges. Atlas scaling is a data modeling problem (choosing a good shard key), while Elasticsearch scaling is an operational problem (managing JVM heap and shards).</p>
                                 <div class="grid md:grid-cols-2 gap-4">
                                    <div class="bg-slate-900 p-4 rounded-lg border border-slate-700">
                                        <h5 class="font-bold text-lg text-[#00ED64]">Atlas Search Scaling Challenges</h5>
                                        <ul class="list-disc list-inside space-y-2 mt-2 text-slate-400">
                                            <li>**Shard Key Selection:** The most critical factor. A poor shard key leads to "hot shards" and performance bottlenecks.</li>
                                            <li>**Scatter-Gather Queries:** Queries that don't use the shard key must be broadcast to all shards, increasing latency.</li>
                                            <li>**Scaling Model:** Primarily a data and query design challenge.</li>
                                        </ul>
                                    </div>
                                    <div class="bg-slate-900 p-4 rounded-lg border border-slate-700">
                                        <h5 class="font-bold text-lg db-color-elastic">Elasticsearch Scaling Challenges</h5>
                                        <ul class="list-disc list-inside space-y-2 mt-2 text-slate-400">
                                            <li>**JVM Heap Management:** Incorrect sizing leads to long garbage collection pauses and cluster instability.</li>
                                            <li>**Shard Count & Size:** Must be planned in advance. Too many shards cause overhead; too few makes rebalancing difficult.</li>
                                            <li>**Scaling Model:** Primarily an infrastructure and operational tuning challenge.</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div id="deep-dive-tab-features-elastic" class="deep-dive-tab-content">
                                <p class="text-center text-slate-400 mb-8 max-w-3xl mx-auto">The licensing split between Elasticsearch and OpenSearch is a critical factor. OpenSearch provides a more feature-complete open-source offering, while Atlas's key feature is its seamless integration.</p>
                                <div id="feature-grid-elastic" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4"></div>
                                <div id="feature-details-elastic" class="mt-6 bg-slate-900 p-4 rounded-lg border border-slate-700 min-h-[100px] text-slate-400">
                                    <p class="text-center">Select a feature to see details.</p>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>

                <!-- PINECONE COMPARISON CONTENT -->
                <div id="main-tab-pinecone" class="main-tab-content">
                     <section class="mb-12 md:mb-20">
                        <h2 class="text-3xl font-bold text-center mb-8 text-white">At a Glance: Integrated vs. Specialized</h2>
                        <div class="grid md:grid-cols-2 gap-8 max-w-6xl mx-auto">
                            <div class="bg-slate-800 p-6 rounded-xl border border-slate-700 shadow-lg">
                                <h3 class="text-2xl font-bold text-[#00ED64] mb-4">MongoDB Atlas Search</h3>
                                <p class="text-slate-400">The <span class="font-semibold text-[#00ED64]">Integrated Data Platform</span>. Unifies vector search with a primary document database, simplifying the architecture for AI applications built on existing data.</p>
                            </div>
                            <div class="bg-slate-800 p-6 rounded-xl border border-slate-700 shadow-lg">
                                <h3 class="text-2xl font-bold db-color-pinecone mb-4">Pinecone</h3>
                                 <p class="text-slate-400">The <span class="font-semibold db-color-pinecone">Purpose-Built Vector Database</span>. A specialized, serverless, API-first service optimized for pure vector operations at massive scale.</p>
                            </div>
                        </div>
                    </section>

                     <section class="bg-slate-800/50 p-6 md:p-8 rounded-2xl border border-slate-700 shadow-lg mb-12 md:mb-20">
                         <h2 class="text-3xl font-bold text-center mb-2 text-white">Comparative Deep Dive</h2>
                         <p class="text-center text-slate-400 mb-8">Select a category to explore a detailed comparison.</p>
                        <div class="deep-dive-tabs mb-6 border-b border-slate-700 flex justify-center space-x-4 md:space-x-8" data-parent-tab="pinecone">
                            <button class="deep-dive-tab-button text-sm md:text-base px-4 py-3 border-b-2 border-transparent text-slate-400 hover:text-green-400" data-deep-dive-tab="architecture">Architecture</button>
                            <button class="deep-dive-tab-button text-sm md:text-base px-4 py-3 border-b-2 border-transparent text-slate-400 hover:text-green-400" data-deep-dive-tab="search-types">Search Types</button>
                            <button class="deep-dive-tab-button text-sm md:text-base px-4 py-3 border-b-2 border-transparent text-slate-400 hover:text-green-400" data-deep-dive-tab="performance">Performance</button>
                            <button class="deep-dive-tab-button text-sm md:text-base px-4 py-3 border-b-2 border-transparent text-slate-400 hover:text-green-400" data-deep-dive-tab="features">Features</button>
                        </div>
                        
                        <div class="mt-8 min-h-[400px]">
                            <div id="deep-dive-tab-architecture-pinecone" class="deep-dive-tab-content">
                                <p class="text-center text-slate-400 mb-8 max-w-3xl mx-auto">Atlas treats vectors as an attribute of a document, while Pinecone treats vectors as the primary entity with metadata attached. This reflects their different "centers of gravity."</p>
                                <div class="grid md:grid-cols-2 gap-8 items-start">
                                     <div>
                                        <h3 class="text-xl font-bold text-[#00ED64] mb-4 text-center">Atlas Search Architecture</h3>
                                        <div class="arch-component bg-slate-900 p-6 rounded-lg min-h-[300px] flex flex-col items-center justify-center space-y-4 border border-slate-700">
                                            <p class="font-semibold text-white">BSON Document</p>
                                            <div class="w-full bg-gray-800 p-3 rounded-lg border border-gray-600 text-left text-xs">
                                                <pre><code>{<br>  _id: "prod123",<br>  name: "Hiking Boots",<br>  description: "...",<br>  image_embedding: [0.1, ...]<br>}</code></pre>
                                            </div>
                                            <p class="text-sm mt-2 text-slate-400">The vector is an attribute of a larger, primary document.</p>
                                        </div>
                                     </div>
                                      <div>
                                        <h3 class="text-xl font-bold db-color-pinecone mb-4 text-center">Pinecone Architecture</h3>
                                        <div class="arch-component bg-slate-900 p-6 rounded-lg min-h-[300px] flex flex-col items-center justify-center space-y-4 border border-slate-700">
                                            <p class="font-semibold text-white">Vector Record</p>
                                            <div class="w-full bg-gray-800 p-3 rounded-lg border border-gray-600 text-left text-xs">
                                                <pre><code>{<br>  id: "prod123",<br>  values: [0.1, ...],<br>  metadata: {<br>    name: "Hiking Boots"<br>  }<br>}</code></pre>
                                            </div>
                                             <p class="text-sm mt-2 text-slate-400">The vector is the primary entity; metadata is attached to it.</p>
                                        </div>
                                     </div>
                                </div>
                            </div>
                            <div id="deep-dive-tab-search-types-pinecone" class="deep-dive-tab-content">
                                <p class="text-center text-slate-400 mb-8 max-w-3xl mx-auto">The platforms differ significantly in how they approach full-text and hybrid search. Atlas leverages a mature text engine, while Pinecone models everything as a vector operation.</p>
                                <div class="grid md:grid-cols-2 gap-4">
                                    <div class="bg-slate-900 p-4 rounded-lg border border-slate-700">
                                        <h5 class="font-bold text-lg text-[#00ED64]">Atlas Search</h5>
                                        <ul class="list-disc list-inside space-y-2 mt-2 text-slate-400">
                                            <li>**Full-Text:** Mature, Lucene-based engine with custom analyzers for deep linguistic control.</li>
                                            <li>**Hybrid Search:** Native server-side `$rankFusion` stage simplifies client logic.</li>
                                        </ul>
                                    </div>
                                    <div class="bg-slate-900 p-4 rounded-lg border border-slate-700">
                                        <h5 class="font-bold text-lg db-color-pinecone">Pinecone</h5>
                                        <ul class="list-disc list-inside space-y-2 mt-2 text-slate-400">
                                            <li>**Full-Text:** Implemented via sparse vectors (BM25). Lacks native linguistic processing.</li>
                                            <li>**Hybrid Search:** Requires querying two separate indexes and performing fusion in the application layer.</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div id="deep-dive-tab-performance-pinecone" class="deep-dive-tab-content">
                                <p class="text-center text-slate-400 mb-8 max-w-3xl mx-auto">Benchmarks show purpose-built vector databases like Pinecone lead in raw vector search latency. However, end-to-end application latency, which includes fetching metadata, may be lower on an integrated platform like Atlas.</p>
                                <div class="chart-container">
                                    <canvas id="pineconePerformanceChart"></canvas>
                                </div>
                            </div>
                            <div id="deep-dive-tab-features-pinecone" class="deep-dive-tab-content">
                                <p class="text-center text-slate-400 mb-8 max-w-3xl mx-auto">Pinecone offers more advanced, specialized vector search features, while Atlas provides the simplicity of an integrated, fully managed platform.</p>
                                <div id="feature-grid-pinecone" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4"></div>
                                <div id="feature-details-pinecone" class="mt-6 bg-slate-900 p-4 rounded-lg border border-slate-700 min-h-[100px] text-slate-400">
                                    <p class="text-center">Select a feature to see details.</p>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>

                <!-- QDRANT COMPARISON CONTENT -->
                <div id="main-tab-qdrant" class="main-tab-content">
                    <section class="mb-12 md:mb-20">
                        <h2 class="text-3xl font-bold text-center mb-8 text-white">At a Glance: Two Philosophies</h2>
                        <div class="grid md:grid-cols-2 gap-8 max-w-6xl mx-auto">
                            <div class="bg-slate-800 p-6 rounded-xl border border-slate-700 shadow-lg">
                                <h3 class="text-2xl font-bold text-[#00ED64] mb-4">MongoDB Atlas Search</h3>
                                <p class="text-slate-400">The <span class="font-semibold text-[#00ED64]">Integrated Data Platform</span>. Embeds search directly within MongoDB to reduce complexity and accelerate development.</p>
                            </div>
                            <div class="bg-slate-800 p-6 rounded-xl border border-slate-700 shadow-lg">
                                <h3 class="text-2xl font-bold db-color-qdrant mb-4">Qdrant</h3>
                                <p class="text-slate-400">The <span class="font-semibold db-color-qdrant">Specialized Vector Database</span>. Purpose-built for performance, scalability, and advanced vector search features.</p>
                            </div>
                        </div>
                    </section>

                    <section class="bg-slate-800/50 p-6 md:p-8 rounded-2xl border border-slate-700 shadow-lg mb-12 md:mb-20">
                         <h2 class="text-3xl font-bold text-center mb-2 text-white">Comparative Deep Dive</h2>
                         <p class="text-center text-slate-400 mb-8">Select a category to explore a detailed comparison.</p>
                        <div class="deep-dive-tabs mb-6 border-b border-slate-700 flex justify-center space-x-4 md:space-x-8" data-parent-tab="qdrant">
                            <button class="deep-dive-tab-button text-sm md:text-base px-4 py-3 border-b-2 border-transparent text-slate-400 hover:text-green-400" data-deep-dive-tab="architecture">Architecture</button>
                            <button class="deep-dive-tab-button text-sm md:text-base px-4 py-3 border-b-2 border-transparent text-slate-400 hover:text-green-400" data-deep-dive-tab="search-types">Search Types</button>
                            <button class="deep-dive-tab-button text-sm md:text-base px-4 py-3 border-b-2 border-transparent text-slate-400 hover:text-green-400" data-deep-dive-tab="performance">Performance</button>
                            <button class="deep-dive-tab-button text-sm md:text-base px-4 py-3 border-b-2 border-transparent text-slate-400 hover:text-green-400" data-deep-dive-tab="features">Features</button>
                        </div>
                        
                        <div class="mt-8 min-h-[400px]">
                            <div id="deep-dive-tab-architecture-qdrant" class="deep-dive-tab-content">
                                <p class="text-center text-slate-400 mb-8 max-w-3xl mx-auto">The architectural design of each platform reflects its core philosophy. Atlas integrates search into a general-purpose database, while Qdrant is built as a specialized engine.</p>
                                <div class="grid md:grid-cols-2 gap-8 items-start">
                                     <div>
                                        <h3 class="text-xl font-bold text-[#00ED64] mb-4 text-center">Atlas Search Architecture</h3>
                                        <div id="atlas-arch-diagram-qdrant" class="arch-component bg-slate-900 p-6 rounded-lg min-h-[300px] flex flex-col items-center justify-center space-y-4 border border-slate-700 relative">
                                            <div class="bg-slate-800 p-4 rounded-lg shadow-lg border border-green-500/30 w-48 text-center" data-info="atlas-mongod">
                                                <h4 class="font-bold text-white">`mongod`</h4>
                                                <p class="text-sm text-slate-400">Primary DB Process</p>
                                            </div>
                                            <div class="text-green-400 font-semibold text-sm flex items-center">
                                                <span class="mr-2">⇅</span> Change Streams Sync
                                            </div>
                                             <div class="bg-slate-800 p-4 rounded-lg shadow-lg border border-green-500/30 w-48 text-center" data-info="atlas-mongot">
                                                <h4 class="font-bold text-white">`mongot`</h4>
                                                <p class="text-sm text-slate-400">Search Process (Lucene)</p>
                                            </div>
                                             <div class="absolute bottom-2 right-2 bg-yellow-400/10 text-yellow-300 text-xs px-2 py-1 rounded-full border border-yellow-400/30" data-info="atlas-nodes">
                                               💡 Deployed on Search Nodes
                                            </div>
                                        </div>
                                        <div id="atlas-arch-info-qdrant" class="mt-4 p-4 bg-green-500/10 rounded-lg text-sm text-green-200 border border-green-500/20 min-h-[100px] transition-opacity">
                                            Select a component to see details.
                                        </div>
                                     </div>
                                      <div>
                                        <h3 class="text-xl font-bold db-color-qdrant mb-4 text-center">Qdrant Architecture</h3>
                                        <div id="qdrant-arch-diagram-qdrant" class="arch-component bg-slate-900 p-6 rounded-lg min-h-[300px] flex flex-col items-center justify-center border border-slate-700 relative">
                                            <div class="bg-slate-800 p-4 rounded-lg shadow-lg border border-slate-700 w-48 text-center" data-info="qdrant-core">
                                                <h4 class="font-bold text-white">Rust-Based Core</h4>
                                                <p class="text-sm text-slate-400">Vector-Native Engine</p>
                                            </div>
                                            <div class="grid grid-cols-2 gap-2 mt-4 text-center">
                                                 <div class="bg-slate-800 text-xs px-2 py-1 rounded-md shadow-lg border border-slate-700" data-info="qdrant-sharding">Sharding</div>
                                                 <div class="bg-slate-800 text-xs px-2 py-1 rounded-md shadow-lg border border-slate-700" data-info="qdrant-replication">Replication</div>
                                                 <div class="bg-slate-800 text-xs px-2 py-1 rounded-md shadow-lg border border-slate-700" data-info="qdrant-raft">Raft Consensus</div>
                                                 <div class="bg-slate-800 text-xs px-2 py-1 rounded-md shadow-lg border border-slate-700" data-info="qdrant-storage">Memmap Storage</div>
                                            </div>
                                        </div>
                                         <div id="qdrant-arch-info-qdrant" class="mt-4 p-4 bg-slate-800 rounded-lg text-sm text-slate-300 border border-slate-700 min-h-[100px] transition-opacity">
                                            Select a component to see details.
                                         </div>
                                     </div>
                                </div>
                            </div>
                            <div id="deep-dive-tab-search-types-qdrant" class="deep-dive-tab-content">
                                <p class="text-center text-slate-400 mb-8 max-w-3xl mx-auto">Both platforms support keyword and vector search, but their approaches differ. Atlas relies on a mature search library, while Qdrant uses a unified vector-native model.</p>
                                <div class="space-y-8">
                                    <div>
                                        <h4 class="text-lg font-bold text-center mb-4 text-white">Full-Text (Lexical) Search</h4>
                                        <div class="grid md:grid-cols-2 gap-4">
                                            <div class="bg-slate-800 p-4 rounded-lg border border-slate-700">
                                                <h5 class="font-bold text-[#00ED64]">Atlas: The Traditionalist</h5>
                                                <p class="text-sm mt-1 text-slate-400">Leverages <span class="font-semibold text-slate-200">Apache Lucene</span>, offering a rich, mature feature set with a highly configurable analysis pipeline.</p>
                                            </div>
                                            <div class="bg-slate-800 p-4 rounded-lg border border-slate-700">
                                                <h5 class="font-bold db-color-qdrant">Qdrant: The Vector-Native</h5>
                                                <p class="text-sm mt-1 text-slate-400">Models keywords using <span class="font-semibold text-slate-200">sparse vectors</span> (e.g., BM25), creating a unified API but abstracting analysis to the external vectorization model.</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div>
                                        <h4 class="text-lg font-bold text-center mb-4 text-white">Vector Search & Filtering</h4>
                                         <div class="grid md:grid-cols-2 gap-4">
                                            <div class="bg-slate-800 p-4 rounded-lg border border-slate-700">
                                                <h5 class="font-bold text-[#00ED64]">Atlas: Pre-Filter</h5>
                                                <p class="text-sm mt-1 text-slate-400">Applies metadata filters <span class="font-semibold text-slate-200">before</span> the vector search. Simple and effective, but can sometimes reduce accuracy on restrictive queries.</p>
                                            </div>
                                            <div class="bg-slate-800 p-4 rounded-lg border border-slate-700">
                                                <h5 class="font-bold db-color-qdrant">Qdrant: Filterable HNSW</h5>
                                                <p class="text-sm mt-1 text-slate-400">A key advantage. Builds the HNSW index with awareness of metadata, leading to <span class="font-semibold text-slate-200">higher accuracy and performance</span> on complex filtered queries.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="deep-dive-tab-performance-qdrant" class="deep-dive-tab-content">
                                <p class="text-center text-slate-400 mb-8 max-w-3xl mx-auto">Performance is a key differentiator. Qdrant's specialized Rust-based architecture generally leads in raw vector search speed, while Atlas offers robust performance optimized through its managed platform.</p>
                                <div class="chart-container">
                                    <canvas id="qdrantPerformanceChart"></canvas>
                                </div>
                            </div>
                            <div id="deep-dive-tab-features-qdrant" class="deep-dive-tab-content">
                                <p class="text-center text-slate-400 mb-8 max-w-3xl mx-auto">Beyond core search, the platforms differ in key features like vector compression (quantization), deployment flexibility, and pricing models. Click on a feature card below to see a detailed comparison.</p>
                                <div id="feature-grid-qdrant" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4"></div>
                                <div id="feature-details-qdrant" class="mt-6 bg-slate-800 p-4 rounded-lg border border-slate-700 min-h-[100px] text-slate-400">
                                    <p class="text-center">Select a feature to see details.</p>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>

            </div> <!-- End Main Tab Content Container -->
            
            <section id="common-sections">
                <div id="scaling-challenges" class="mt-16">
                    <div class="text-center mb-10">
                        <h2 class="text-3xl font-bold text-white">Scaling from Gigabytes to Terabytes</h2>
                        <p class="text-slate-400 mt-2 max-w-3xl mx-auto">A practical analysis of the challenges and pitfalls of scaling each search architecture.</p>
                    </div>
                    <div class="space-y-12">
                        <div class="bg-gray-900 p-8 rounded-2xl border border-gray-700">
                            <h3 class="text-2xl font-bold mb-6 db-color-mongo">Atlas Search: The Integrated Scaling Path</h3>
                            <div class="space-y-6">
                                <div>
                                    <h4 class="font-semibold text-lg text-white">10GB to 1TB: The First Search Nodes</h4>
                                    <p class="mt-2 text-slate-400">At this scale, the main challenge is managing the resources of the dedicated Search Nodes. The HNSW index must fit in the RAM of these nodes to avoid performance-killing page faults. This often requires scaling up the Search Node tier and enabling <span class="font-bold text-white">Quantization</span> to reduce the memory footprint of vectors. The focus is on vertical scaling of the search tier.</p>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-lg text-white">1TB to 10TB+: The Sharded Search Cluster</h4>
                                    <p class="mt-2 text-slate-400">At multi-terabyte scale, vertical scaling becomes cost-prohibitive. The challenges mirror those of scaling the core database: sharding the primary collection and dealing with scatter-gather overhead for queries that cannot be targeted to a single shard.</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-gray-900 p-8 rounded-2xl border border-gray-700">
                            <h3 class="text-2xl font-bold mb-6 db-color-elastic">Elasticsearch / OpenSearch: The Operational Gauntlet</h3>
                            <div class="space-y-6">
                                <div>
                                    <h4 class="font-semibold text-lg text-white">10GB to 1TB: Shard Count & JVM Tuning</h4>
                                    <p class="mt-2 text-slate-400">The number of primary shards per index must be chosen at creation and cannot be changed. Correctly sizing the <span class="font-bold text-white">JVM heap</span> is critical to avoid long garbage collection pauses. This is a significant operational challenge.</p>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-lg text-white">1TB to 10TB+: Cluster Coordination & Data Tiers</h4>
                                    <p class="mt-2 text-slate-400">At this scale, managing cluster state and inter-node communication becomes a significant burden. To manage cost, implementing <span class="font-bold text-white">data tiers</span> (hot, warm, cold) becomes essential, adding operational complexity.</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-gray-900 p-8 rounded-2xl border border-gray-700">
                            <h3 class="text-2xl font-bold mb-6 db-color-pinecone">Pinecone: The Serverless Scale</h3>
                            <div class="space-y-6">
                                <div>
                                    <h4 class="font-semibold text-lg text-white">10GB to 1TB: Pods, Replicas, and Metadata</h4>
                                    <p class="mt-2 text-slate-400">Pinecone's scaling is managed by selecting pod types and sizes. The main challenge is <span class="font-bold text-white">cost-performance tuning</span>. Inefficient metadata filtering can degrade performance significantly as the dataset grows.</p>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-lg text-white">1TB to 10TB+: Advanced Quantization and Cost Control</h4>
                                    <p class="mt-2 text-slate-400">At massive scale, the cost of storing full-precision vectors in RAM becomes prohibitive. The primary challenge is implementing an effective <span class="font-bold text-white">quantization strategy</span> to dramatically reduce memory footprint and cost.</p>
                                </div>
                            </div>
                        </div>
                         <div class="bg-gray-900 p-8 rounded-2xl border border-gray-700">
                            <h3 class="text-2xl font-bold mb-6 db-color-qdrant">Qdrant: The Distributed Scale-Out</h3>
                            <div class="space-y-6">
                                <div>
                                    <h4 class="font-semibold text-lg text-white">10GB to 1TB: Sharding and Filtering</h4>
                                    <p class="mt-2 text-slate-400">Qdrant scales horizontally by adding more nodes and sharding collections. The primary challenge is designing an effective <span class="font-bold text-white">sharding strategy</span>. Leveraging Qdrant's <span class="font-bold text-white">Filterable HNSW</span> is critical for performance.</p>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-lg text-white">1TB to 10TB+: Quantization and Operational Tuning</h4>
                                    <p class="mt-2 text-slate-400">At massive scale, using <span class="font-bold text-white">Product Quantization (PQ)</span> and on-disk <code>memmap</code> storage becomes essential to manage memory costs and operational overhead, trading a small amount of accuracy for massive efficiency gains.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="pricing-analysis" class="mt-16">
                    <div class="text-center mb-10">
                        <h2 class="text-3xl font-bold text-white">Enterprise-Ready Pricing Analysis</h2>
                        <p class="text-slate-400 mt-2 max-w-3xl mx-auto">A comparative TCO analysis for a minimum, enterprise-grade deployment.</p>
                    </div>
                    <div class="overflow-x-auto bg-gray-900 rounded-2xl border border-gray-700 p-2">
                        <table class="w-full text-sm text-left">
                            <thead class="bg-gray-800 text-xs text-slate-300 uppercase">
                                <tr>
                                    <th class="px-6 py-4">Platform</th>
                                    <th class="px-6 py-4">Estimated Monthly Cost (USD)</th>
                                    <th class="px-6 py-4">Key Cost Drivers & Licensing Model</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-700">
                                <tr>
                                    <td class="px-6 py-4 font-bold db-color-mongo">MongoDB Atlas Search</td>
                                    <td class="px-6 py-4 font-bold text-lg">~$1,000 - $1,400</td>
                                    <td class="px-6 py-4">Sum of DB cluster tier <span class="font-bold text-white">plus separate Search Node tier</span>. License bundled.</td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-4 font-bold db-color-elastic">Elastic Cloud / OpenSearch</td>
                                    <td class="px-6 py-4 font-bold text-lg">~$300 - $500</td>
                                    <td class="px-6 py-4">Driven by RAM, storage, instance type. <span class="font-bold text-white">OpenSearch has no license fee.</span></td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-4 font-bold db-color-pinecone">Pinecone</td>
                                    <td class="px-6 py-4 font-bold text-lg">~$70 - $150</td>
                                    <td class="px-6 py-4">Driven by pod type, size, and replicas. <span class="font-bold text-white">Requires separate primary DB.</span></td>
                                </tr>
                                 <tr>
                                    <td class="px-6 py-4 font-bold db-color-qdrant">Qdrant Cloud</td>
                                    <td class="px-6 py-4 font-bold text-lg">~$600 - $900</td>
                                    <td class="px-6 py-4">Driven by vCPU and RAM per node. <span class="font-bold text-white">Requires separate primary DB.</span> Open-source option available.</td>
                                </tr>
                            </tbody>
                        </table>
                        <p class="text-xs text-slate-500 p-4"><strong>Disclaimer:</strong> These are order-of-magnitude estimates based on publicly available pricing calculators as of mid-2024 for small production clusters. Actual costs will vary.</p>
                    </div>
                </div>

                <div id="use-cases" class="mt-16">
                     <div class="text-center mb-10">
                        <h2 class="text-3xl font-bold text-white">Key Takeaways & Use Cases</h2>
                    </div>
                    <div class="grid md:grid-cols-2 gap-8">
                        <div class="bg-gray-900 p-6 rounded-lg border-2 db-color-mongo">
                            <h5 class="font-bold text-xl mb-3">Choose Atlas Search for...</h5>
                            <p class="mb-4 font-semibold">Integrated Simplicity and Developer Velocity.</p>
                            <ul class="list-disc list-inside space-y-2 text-slate-300">
                                <li>**Existing MongoDB Users:** Leverage your current stack to add search without a new system.</li>
                                <li>**Unified Data Platforms:** When reducing architectural complexity is a primary goal.</li>
                                <li>**Balanced Workloads:** For apps needing a strong document DB with "good enough" search.</li>
                            </ul>
                        </div>
                         <div class="bg-gray-900 p-6 rounded-lg border-2 db-color-elastic">
                            <h5 class="font-bold text-xl mb-3">Choose Elasticsearch / OpenSearch for...</h5>
                            <p class="mb-4 font-semibold">Specialized Log Analytics and Text-Heavy Search.</p>
                            <ul class="list-disc list-inside space-y-2 text-slate-300">
                                <li>**Log Analytics & Observability:** The canonical use case for the ELK/OpenSearch stack.</li>
                                <li>**Enterprise Search:** Building a search engine across diverse, unstructured internal documents.</li>
                                <li>**Complex Textual Analysis:** Applications requiring deep linguistic customization and relevance engineering.</li>
                            </ul>
                        </div>
                        <div class="bg-gray-900 p-6 rounded-lg border-2 db-color-pinecone">
                            <h5 class="font-bold text-xl mb-3">Choose Pinecone for...</h5>
                            <p class="mb-4 font-semibold">Peak Performance and AI-Native Focus.</p>
                            <ul class="list-disc list-inside space-y-2 text-slate-300">
                                <li>**Performance-Critical AI:** When every millisecond of vector search latency matters (e.g., RAG).</li>
                                <li>**Greenfield AI Applications:** For new projects where vector search is the central component.</li>
                                <li>**Serverless & API-First:** When abstracting away all infrastructure management is the goal.</li>
                            </ul>
                        </div>
                        <div class="bg-gray-900 p-6 rounded-lg border-2 db-color-qdrant">
                            <h5 class="font-bold text-xl mb-3">Choose Qdrant for...</h5>
                            <p class="mb-4 font-semibold">Peak Performance and Architectural Flexibility.</p>
                            <ul class="list-disc list-inside space-y-2 text-slate-300">
                                <li>**Complex Filtering:** For multi-tenant SaaS or e-commerce apps with heavy metadata filtering.</li>
                                <li>**Deployment Flexibility:** When you require self-hosting, on-premise, or hybrid cloud.</li>
                                <li>**Best-of-Breed Architecture:** In a microservices environment for a specialized search component.</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <section id="references" class="mt-16">
                    <div class="text-center mb-10">
                        <h2 class="text-3xl font-bold text-white">References & Further Reading</h2>
                    </div>
                    <div class="bg-gray-900 p-8 rounded-2xl border border-gray-700 grid md:grid-cols-2 lg:grid-cols-4 gap-8">
                        <div>
                            <h4 class="font-bold text-lg mb-3 db-color-mongo">MongoDB Atlas</h4>
                            <ul class="space-y-2 text-sm">
                                <li><a href="https://www.mongodb.com/docs/atlas/atlas-search/" class="text-indigo-400 hover:underline">Official Atlas Search Documentation</a></li>
                                <li><a href="https://www.mongodb.com/docs/atlas/atlas-vector-search/" class="text-indigo-400 hover:underline">Official Atlas Vector Search Documentation</a></li>
                                <li><a href="https://www.mongodb.com/products/platform/atlas-search" class="text-indigo-400 hover:underline">Atlas Search Product Page</a></li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-bold text-lg mb-3 db-color-elastic">Elasticsearch</h4>
                            <ul class="space-y-2 text-sm">
                                <li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html" class="text-indigo-400 hover:underline">Official Elasticsearch Documentation</a></li>
                                <li><a href="https://opensearch.org/docs/latest/" class="text-indigo-400 hover:underline">Official OpenSearch Documentation</a></li>
                                 <li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-your-data.html" class="text-indigo-400 hover:underline">Elasticsearch Query DSL</a></li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-bold text-lg mb-3 db-color-pinecone">Pinecone</h4>
                            <ul class="space-y-2 text-sm">
                                <li><a href="https://docs.pinecone.io/" class="text-indigo-400 hover:underline">Official Pinecone Documentation</a></li>
                                <li><a href="https://www.pinecone.io/learn/vector-database/" class="text-indigo-400 hover:underline">What is a Vector Database?</a></li>
                                <li><a href="https://www.pinecone.io/learn/hybrid-search/" class="text-indigo-400 hover:underline">Pinecone on Hybrid Search</a></li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-bold text-lg mb-3 db-color-qdrant">Qdrant</h4>
                            <ul class="space-y-2 text-sm">
                                <li><a href="https://qdrant.tech/documentation/" class="text-indigo-400 hover:underline">Official Qdrant Documentation</a></li>
                                <li><a href="https://qdrant.tech/articles/filtrable-hnsw/" class="text-indigo-400 hover:underline">Filterable HNSW Explained</a></li>
                                <li><a href="https://qdrant.tech/benchmarks/" class="text-indigo-400 hover:underline">Qdrant Performance Benchmarks</a></li>
                            </ul>
                        </div>
                    </div>
                </section>
            </section>
        </main>

        <footer class="text-center mt-16 text-slate-500 text-sm">
            <p>Interactive report generated from a comparative analysis of modern search architectures.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            
            Chart.defaults.color = '#94a3b8';
            Chart.defaults.borderColor = 'rgba(100, 116, 139, 0.2)';

            const mainTabsContainer = document.getElementById('main-tabs-container');
            let activeMainTab = 'elastic';
            let pineconeChart = null;
            let qdrantChart = null;

            // --- Data for Feature Grids ---
            const featuresDataElastic = {
                tco: { title: 'TCO', icon: '💰', content: `<strong>Atlas:</strong> Lower TCO due to integrated architecture.<br><strong>Elasticsearch:</strong> Higher TCO due to needing a primary DB, search cluster, and sync pipeline.` },
                licensing: { title: 'Licensing', icon: '📜', content: `<strong>Atlas:</strong> Proprietary (SSPL).<br><strong>OpenSearch:</strong> Permissive Apache 2.0 license.<br><strong>Elasticsearch:</strong> Restrictive SSPL/Elastic License.` },
                ecosystem: { title: 'Ecosystem', icon: '🌐', content: `<strong>Atlas:</strong> Broad data platform (DB, Search, Mobile, etc.).<br><strong>Elasticsearch:</strong> Focused on observability and security (ELK Stack, SIEM).` },
                dev_exp: { title: 'Dev Experience', icon: '🧑‍💻', content: `<strong>Atlas:</strong> Unified via MQL Aggregations. Familiar for Mongo users.<br><strong>Elasticsearch:</strong> Separate, powerful Query DSL. Requires learning a new system.` },
                scalability: { title: 'Scalability', icon: '🚀', content: `<strong>Atlas:</strong> Scales with the database via sharding. A data modeling challenge.<br><strong>Elasticsearch:</strong> Scales independently. An operational/infrastructure challenge.` },
                data_sync: { title: 'Data Sync', icon: '🔄', content: `<strong>Atlas:</strong> Automatic, managed sync via Change Streams.<br><strong>Elasticsearch:</strong> Requires a separate, self-managed sync pipeline (e.g., Kafka, Logstash).` }
            };

            const featuresDataPinecone = {
                quantization: { title: 'Quantization', icon: '⚡️', content: `<strong>Atlas:</strong> Simple, automatic Scalar & Binary quantization.<br><strong>Pinecone:</strong> Offers more advanced options like Product Quantization for higher compression.` },
                filtering: { title: 'Filtering', icon: '�', content: `<strong>Atlas:</strong> Uses pre-filtering, which can impact accuracy.<br><strong>Pinecone:</strong> Advanced single-stage filtering provides superior performance and accuracy.` },
                deployment: { title: 'Deployment', icon: '☁️', content: `<strong>Atlas:</strong> Managed multi-cloud DBaaS.<br><strong>Pinecone:</strong> Cloud-only, proprietary, serverless API.` },
                dev_exp: { title: 'Dev Experience', icon: '🧑‍💻', content: `<strong>Atlas:</strong> Unified API within MongoDB ecosystem.<br><strong>Pinecone:</strong> Simple, clean Python-first SDK for AI/ML workflows.`},
                data_model: { title: 'Data Model', icon: '📦', content: `<strong>Atlas:</strong> Vector is an attribute within a rich BSON document.<br><strong>Pinecone:</strong> Vector is the primary entity with attached metadata.`},
                hybrid_search: { title: 'Hybrid Search', icon: '🧬', content: `<strong>Atlas:</strong> Native, server-side fusion with $rankFusion.<br><strong>Pinecone:</strong> Requires client-side logic to query two indexes and fuse results.`}
            };

            const featuresDataQdrant = {
                quantization: { title: 'Quantization', icon: '⚡️', content: `<strong>Atlas:</strong> Offers simplified Scalar & Binary quantization.<br><strong>Qdrant:</strong> Provides granular control with Scalar, Binary, and advanced Product Quantization.`},
                deployment: { title: 'Deployment', icon: '☁️', content: `<strong>Atlas:</strong> A fully managed, multi-cloud DaaS.<br><strong>Qdrant:</strong> Maximum flexibility with Cloud, Hybrid, and open-source self-hosted options.`},
                filtering: { title: 'Filtering', icon: '🔍', content: `<strong>Atlas:</strong> Uses pre-filtering before the search.<br><strong>Qdrant:</strong> Advanced "Filterable HNSW" provides superior performance and accuracy on filtered queries.`},
                dev_exp: { title: 'Dev Experience', icon: '🧑‍💻', content: `<strong>Atlas:</strong> Unified via MQL. Low barrier for existing users.<br><strong>Qdrant:</strong> Feature-rich SDKs (Python, Rust, etc.) with a powerful Query API.`},
                scalability: { title: 'Scalability', icon: '🚀', content: `<strong>Atlas:</strong> Vertical scaling of Search Nodes, horizontal via DB sharding.<br><strong>Qdrant:</strong> Designed for horizontal scaling by adding nodes to a distributed cluster.`},
                ram_req: { title: 'RAM Needs', icon: '💾', content: `<strong>Atlas:</strong> HNSW index must fit in RAM for performance.<br><strong>Qdrant:</strong> Can handle datasets larger than RAM with <code>memmap</code> storage.`}
            };

            // --- Data for Qdrant Architecture Diagram ---
            const atlasArchInfoQdrant = {
                'atlas-mongod': 'The standard MongoDB database daemon. It handles all core database operations.',
                'atlas-mongot': 'A separate Java-based process that manages the Apache Lucene search library.',
                'atlas-nodes': 'For production workloads, `mongot` runs on dedicated Search Nodes for workload isolation.'
            };
             const qdrantArchInfoQdrant = {
                'qdrant-core': 'The engine is written in Rust, renowned for performance and memory safety.',
                'qdrant-sharding': 'Collections are broken into shards to distribute data and load across a cluster.',
                'qdrant-replication': 'Shards can be replicated for high availability.',
                'qdrant-raft': 'The Raft consensus protocol is used to ensure cluster metadata is kept consistent.',
                'qdrant-storage': 'Supports both in-memory and memory-mapped (memmap) files for handling large datasets.'
            };

            function populateFeatureGrid(containerId, detailsId, data) {
                const grid = document.getElementById(containerId);
                const details = document.getElementById(detailsId);
                if (!grid || !details) return;
                
                grid.innerHTML = ''; 
                Object.entries(data).forEach(([key, value]) => {
                    const card = document.createElement('div');
                    card.className = 'feature-card bg-slate-800 p-4 rounded-lg border border-slate-700 shadow-lg flex flex-col items-center justify-center text-center';
                    card.dataset.feature = key;
                    card.innerHTML = `<div class="text-3xl mb-2">${value.icon}</div><h5 class="font-semibold text-sm text-slate-200">${value.title}</h5>`;
                    grid.appendChild(card);
                });

                grid.addEventListener('click', e => {
                    const card = e.target.closest('.feature-card');
                    if (card) {
                        const featureKey = card.dataset.feature;
                        details.innerHTML = `<h4 class="text-md font-bold text-white mb-2">${data[featureKey].title}</h4><p class="text-slate-400">${data[featureKey].content}</p>`;
                    }
                });
            }

            function switchDeepDiveTab(parentTab, tabId) {
                const parentElement = document.getElementById(`main-tab-${parentTab}`);
                if (!parentElement) return;
                parentElement.querySelectorAll('.deep-dive-tab-button').forEach(button => button.classList.remove('active'));
                const buttonToActivate = parentElement.querySelector(`.deep-dive-tab-button[data-deep-dive-tab="${tabId}"]`);
                if(buttonToActivate) buttonToActivate.classList.add('active');

                parentElement.querySelectorAll('.deep-dive-tab-content').forEach(content => content.classList.remove('active'));
                const contentToActivate = parentElement.querySelector(`#deep-dive-tab-${tabId}-${parentTab}`);
                if(contentToActivate) contentToActivate.classList.add('active');
            }

            function renderPerformanceChart(canvasId, chartInstance, data, colors) {
                const canvas = document.getElementById(canvasId);
                if (!canvas) return null;
                if (chartInstance) chartInstance.destroy();
                
                const ctx = canvas.getContext('2d');
                return new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['Atlas Vector Search', data.label],
                        datasets: [{
                            label: 'p99 Query Latency (ms)',
                            data: [75, data.value],
                            backgroundColor: ['rgba(0, 237, 100, 0.5)', colors.bg],
                            borderColor: ['#00ED64', colors.border],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true, maintainAspectRatio: false, indexAxis: 'y',
                        plugins: { legend: { display: false }, title: { display: true, text: 'Comparative Raw Vector Search Latency (Illustrative)', font: { size: 16 }, color: '#e2e8f0' }},
                        scales: { x: { beginAtZero: true, title: { display: true, text: 'Latency (ms) - Lower is Better' } } }
                    }
                });
            }

            function setupArchDiagramInteraction(diagramId, infoBoxId, infoData) {
                const diagram = document.getElementById(diagramId);
                const infoBox = document.getElementById(infoBoxId);
                if (!diagram || !infoBox) return;

                diagram.addEventListener('mouseover', e => {
                    const component = e.target.closest('[data-info]');
                    if (component && infoData[component.dataset.info]) {
                        infoBox.innerHTML = infoData[component.dataset.info];
                    }
                });
            }

            function switchMainTab(tabId) {
                activeMainTab = tabId;
                document.querySelectorAll('.main-tab-button').forEach(button => button.classList.remove('active'));
                document.querySelector(`.main-tab-button[data-main-tab="${tabId}"]`).classList.add('active');

                document.querySelectorAll('.main-tab-content').forEach(content => content.classList.remove('active'));
                document.getElementById(`main-tab-${tabId}`).classList.add('active');
                
                if (tabId === 'elastic') {
                    switchDeepDiveTab('elastic', 'architecture');
                    populateFeatureGrid('feature-grid-elastic', 'feature-details-elastic', featuresDataElastic);
                } else if (tabId === 'pinecone') {
                    switchDeepDiveTab('pinecone', 'architecture');
                    populateFeatureGrid('feature-grid-pinecone', 'feature-details-pinecone', featuresDataPinecone);
                    setTimeout(() => {
                        pineconeChart = renderPerformanceChart('pineconePerformanceChart', pineconeChart, 
                            { label: 'Pinecone', value: 30 }, 
                            { bg: 'rgba(249, 115, 22, 0.5)', border: '#f97316' }
                        );
                    }, 0);
                } else if (tabId === 'qdrant') {
                    switchDeepDiveTab('qdrant', 'architecture');
                    populateFeatureGrid('feature-grid-qdrant', 'feature-details-qdrant', featuresDataQdrant);
                    setupArchDiagramInteraction('atlas-arch-diagram-qdrant', 'atlas-arch-info-qdrant', atlasArchInfoQdrant);
                    setupArchDiagramInteraction('qdrant-arch-diagram-qdrant', 'qdrant-arch-info-qdrant', qdrantArchInfoQdrant);
                    setTimeout(() => {
                        qdrantChart = renderPerformanceChart('qdrantPerformanceChart', qdrantChart,
                            { label: 'Qdrant', value: 38 },
                            { bg: 'rgba(239, 68, 68, 0.5)', border: '#ef4444' }
                        );
                    }, 0);
                }
            }

            mainTabsContainer.addEventListener('click', (e) => {
                const button = e.target.closest('.main-tab-button');
                if (button) {
                    switchMainTab(button.dataset.mainTab);
                }
            });

            document.querySelectorAll('.deep-dive-tabs').forEach(container => {
                container.addEventListener('click', (e) => {
                    const button = e.target.closest('.deep-dive-tab-button');
                    if (button) {
                        switchDeepDiveTab(button.parentElement.dataset.parentTab, button.dataset.deepDiveTab);
                    }
                });
            });

            // Initial setup
            switchMainTab('elastic');

        });
    </script>
</body>
</html>
�